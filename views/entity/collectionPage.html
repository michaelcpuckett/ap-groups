{% macro collectionPageEntity(entity) %}
  <!doctype html>
  <html>
    <title>chirp.social - {{ entity.name }} - Page {{ entity.page }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <meta name="description" content="{{ group.summary }}" />
    <link rel="stylesheet" href="/base.css" />
    <link rel="stylesheet" href="/index.css" />
    <body>
      <div class="root">
        <div class="container">
          {{ header() }}
          <div class="regions">
            {% set items = entity.items %}
            {% if entity.type == 'OrderedCollectionPage' %}
              {% set items = entity.orderedItems %}
            {% endif %}
            {% if items.length %}
              <div class="region">
                {{ pagination(entity) }}
              </div>
              {% for item in items %}
                {% if item.type == 'Announce' %}
                  <div class="region">
                    <announce-entity entity-id="{{ item.id }}"></announce-entity>
                  </div>
                {% endif %}
                {% if item.type == 'Create' and item.object.id and item.object.type == 'Note' %}
                  <div class="region">
                    The group posted a Note:

                    <p>{{ item.object.content }}</p>
                  </div>
                {% endif %}
                {% if item.type == 'Create' and item.object.id and item.object.type == 'Group' %}
                  <directory-entry entity-id="{{ item.object.id }}"></directory-entry>
                {% endif %}
              {% endfor %}
              <div class="region">
                {{ pagination(entity) }}
              </div>
            {% else %}
              <div class="region">
                No posts yet.
              </div>
            {% endif %}
          </div>
        </div>
        <div class="right-rail">
          {% if entity.name == 'Outbox' and r/entity\/bot/.test(entity.attributedTo) %}
            <div class="region">
              <search-users-form entity-id="{{ entity.id }}"></search-users-form>
            </div>
          {% endif %}
          {% if entity.name == 'Shared' or entity.name == 'Outbox' %}
            {{ directoryLink() }}
            {% if entity.attributedTo %}
              {% if not r/entity\/bot/.test(entity.attributedTo) %}
                <directory-entry entity-id="{{ entity.attributedTo }}"></directory-entry>
              {% endif %}
            {% endif %}
          {% endif %}
          {{ about() }}
        </div>
      </div>
      <script type="module" src="/group-entity.js"></script>
    </body>
  </html>
{% endmacro %}